[{"content":"我在北京 Wazzup Beijing\n回到最旧 2025 Your browser doesn't support HTML5 video. Here is a link to the video instead. 鲨鱼 Your browser doesn't support HTML5 video. Here is a link to the video instead. 初雪 2024 回到最新 ","date":"2025-10-20T21:30:00+08:00","image":"https://blog.kmtea.eu/p/251020-wazzup-beijing/img/cover_hu_2bc1cfc88b3ff7dd.webp","permalink":"https://blog.kmtea.eu/p/251020-wazzup-beijing/","title":"我在北京"},{"content":"十月游记 2024年10月天津旅游记录\n10月19日 出发\n民宿里的哈基米\n10月20日 本来想错峰的没想到碰上马拉松了\n","date":"2024-12-15T21:30:00+08:00","image":"https://blog.kmtea.eu/p/241215-oct-travel/img/cover_hu_4d837db553701822.webp","permalink":"https://blog.kmtea.eu/p/241215-oct-travel/","title":"十月游记"},{"content":"六月游记（三） 2024年6月香港旅游记录\n6月14日 今天主线任务开卡\n提前一天到了深圳，早上出发啦\n过关后买了八达通，先坐东铁线到上水，转乘276P到元朗的大棠路下\n早上在下雨，到的时候9点不到，就看到有人在银行门口排队了\n一切顺利！成功开了中银和汇丰\n下午已经不下雨了，吃完午饭后坐地铁在旺角下，沿着弥敦道逛一圈油尖旺的街景\n重庆大厦\n当时本来想来这住的，还好没有\n到维多利亚港了\n去看了香港艺术馆\n很好的一点是每件展品都会有一张信息卡\n外景\n唐龙\n之后坐了天星小轮到中环\n中环摩天轮\n15元一次，没坐等于没来香港\n在摩天轮上拍的\n水果店\n马会投注站\n用塑料粤语成功跟工作人员购买彩票一张\n坐了叮叮车\n时间不早了，坐地铁回深圳过夜喽\n6月15日 今天主线任务海洋公园\n不想再交$50港铁过关税了，去莲塘/香园围口岸过关\n坐B7/B8从口岸出发，换乘地铁到海洋公园\n10点半到了\n好多小学生在搞活动，而且粤普都会说\n胆子最大的一次，坐了过山车和空中飞人\n到下午雨突然变大\n芝士企鹅\n缆车上拍的雨中山景\n最后一直到晚上雨里看了灯光秀才走\n离开香港啦\n","date":"2024-10-06T17:30:00+08:00","image":"https://blog.kmtea.eu/p/240630-jun-travel-3/img/cover_hu_40ecb0e052ec444d.webp","permalink":"https://blog.kmtea.eu/p/240630-jun-travel-3/","title":"六月游记（三）"},{"content":"六月游记（二） 2024年6月上海旅游记录\n6月4日 坐下午的火车从嘉兴到上海，已经是晚上了\n先到青旅放下行李，就去欣赏南京路的夜景\n已经打烊的水果店\n走过马路对面就是外滩了\n外滩夜景！\n6月5日 早上有点小雨，来博物馆逛了一圈，但没什么有趣的\n雨中的南京路\n下午到浦东看陆家嘴三件套了\n以及东方明珠\n关门的水果店\n从下面向上看三件套\n去坐轮渡过江了，2元\n白天的黄浦江江景\n之后去了豫园逛了一圈，就一个小园子\n到了晚上，看夜景，因为骑车上人行道10秒喜提警察拦下\n报了身份证号，估计是看我臭外地的，只是口头教育没罚款\n6月6日 早上去了城市规划馆\n强烈推荐！比博物馆有趣多了！\n下午去了中华艺术宫\n路过一大纪念馆的地铁站，不用去馆里都能速览了\n下午又跟图批面了，逛了下南京路的二次元店\n晚上经过一条街，有点 Just Monika 的恐怖感\n这天晚上出来其实是速通了浦发银行的城市行走活动\n运气超好抽中了两份一等奖\n6月7日 今天去苏州一日游\n第一站是狮子林\n就是……很多石头\n下午去虎丘景区\n最后一站是平江路\n今天上海虹桥站入闸时间是开车前2分钟， 苏州站入闸时间是开车前1分钟， 在此感谢愿意通融的工作人员\n6月8日 这次旅游的最后一天了\n早上先去了上海图书馆\n上海户籍才能办借阅证，游客只能办阅览证，也办了\n长条形的莫名其妙一堆人来打卡的楼\n上海交大，没提前预约，不能进\n复旦大学，医学院校区，没预约，刷身份证就能进\n路过一大会址\n路过水果店\n跟图批第4次面，被迫拉去花鸟市场\n乌克兰鱼\n最后看了十分钟电影就去赶飞机回去了\n毕业旅行结束了。\n","date":"2024-10-04T16:30:00+08:00","image":"https://blog.kmtea.eu/p/240629-jun-travel-2/img/20240605-153538_hu_3a79768caa2849f3.webp","permalink":"https://blog.kmtea.eu/p/240629-jun-travel-2/","title":"六月游记（二）"},{"content":"六月游记（一） 2024年6月杭州旅游记录\n6月1日 起飞啦\nCAN -\u0026gt; HGH\n快降落时候的景色\n到机场了\n后来回看照片，才发现当天是六一\n很好看，但是真的不会生蚊子吗\n这个时候跟图批面上了\n第一站是西湖（东），一个不来后悔一辈子来了后悔一天的地方\n逛了一圈，真就一个湖而已\n以及每到一个城市必打卡的 Apple Store\n晚上去跟f批面了\n6月2日 睡到快中午才醒\n决定坐地铁去绍兴看看\n坐到了自闭座，爽\n到了\n芝士孔乙己\n芝士三味书屋\n芝士门口\n于是回去了\n晚上看了下钱塘江夜景\n6月3日 今天去古镇一日游\n先去乌镇\n中午的半强制消费\n这点￥70\n普通的木房子，普通的河，普通的桥，普通的船\n感觉跟我外婆乡下没什么区别\n接着去南浔\n在桥上拍了一张\n这个水干净了点\n第一次见把研究生当人的景点\n看门猫\n夕阳照在水面挺好看的\n傍晚\n晚上\n打了蓝色灯太赛博朋克了\n坐了个船就回去了\n总结：古镇别去\n6月4日 中午跟桑批在青旅面了\n再游西湖，这次是西面\n雷锋塔收费就没进去\n再见杭州\n在中途站嘉兴下车玩了3小时\n跟图批第二次面\n被迫拉去某商场遗址和花鸟市场了\n最后看了下南湖\n然后踏上了前往上海的火车\n附录 一键载入图片脚本：\n1 2 3 4 5 6 7 import os p = \u0026#39;posts\\\\240628-jun-travel-1\\\\img\u0026#39; imgs = [i for i in os.listdir(p)] for img in imgs: print(f\u0026#39;![](img/{img})\u0026#39;) ","date":"2024-09-15T16:30:00+08:00","image":"https://blog.kmtea.eu/p/240628-jun-travel-1/img/cover_hu_2a6ac49570f7449.webp","permalink":"https://blog.kmtea.eu/p/240628-jun-travel-1/","title":"六月游记（一）"},{"content":"四月游记 2024年4月北京旅游记录\n4月14日 早上起个大早赶飞机\n位置选了最后一排双人座，前面都是三人，没想到旁边没人，i人爽到\n第一次真正意义上坐飞机\n下飞机了，也是第一次坐上摆渡车\n午餐就是飞机餐，下飞机后坐地铁先到民宿休息了下，然后吃晚饭\n先到第二天的主线任务位置踩点\n晚上就在床上看了会电子书\n4月15日 早上第一次吃煎饼\n然后赶去医院面试，过啦\n中午回去平复了下心情，补了个觉\n晚上出去随便走走！\n先去了单推人的大学\n其实是到了北京在看地图的时候才发现在复试地点隔壁的\n刷身份证就能进，好好好\n然后去了奥体中心\n从南到北走了一圈就回来了\n4月16日 六点多就醒了\n还是煎饼起手\n去了天安门\n到天安门西才知道没预约连走路都不行，必须坐地铁原路返回\n后来绕道对面国家大剧院，发现不能走路但是可以骑车\n扫了一辆共享单车，如愿看到了天安门，p人魅力时刻\n然后去了王府井，但是感觉没什么好逛的，可能是太早了\n继续走到了……\n对面的礼堂\n之后不知道去哪，上小红书看到了附近有一条步行街叫南锣鼓巷：\n逛完了回民宿退房的路上收到了航班取消的消息，本来下午还想去地坛玩的，临时改签到下午航班只好马不停蹄赶往机场了\n没有留下遗憾，因为知道马上就要再来了\n","date":"2024-08-05T01:30:00+08:00","image":"https://blog.kmtea.eu/p/240417-apr-travel/img/cover_hu_1f4bbe74402aae44.webp","permalink":"https://blog.kmtea.eu/p/240417-apr-travel/","title":"四月游记"},{"content":"考公报名，但是 JS \u0026amp; Python 赋能 前言 去年3月，我第一次报考广东省公务员， 人生地不熟，也没有进面； 今年1月，我闲着也是闲着又报了一次， 这次在报名阶段加入了一些自己的小技巧， 现分享给大家。\n另外，本次报考依然没有任何准备， 如果硬要说有就是考前1天花1元重金买了2套冲刺卷， 但只是看了一眼题型。\n不对考试结果抱任何希望， 但一旦有幸进入面试就会厚着脸皮去， 然后写(笔试)速通经验以及面试速通失败经验。\n职位筛选 报名的第一步是从公告最下方附件下载职位表：\n初筛 打开 Excel, 启用编辑，以启用接下来的筛选功能。操作简单，不再赘述。\n相对难度 本节通过 Excel 公式，计算每个职位的相对难度。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # 总分 Rn = Sn + Tn + Un + Vn + Wn + Xn + Yn # 综合类比执法类难度更大 Sn = IF(Fn=\u0026#34;综合管理类职位\u0026#34;,1,0) # 竞争人数，拿最大值3减 Tn = MAX(0, 3-Gn) # 限制专业则报名人数少，竞争小 Un = IF(Kn=\u0026#34;不限\u0026#34;,2,0) # 当年应届 \u0026lt; 应届 \u0026lt; 非应届 Vn = IF(Nn=\u0026#34;2024届高校毕业生\u0026#34;,0,IF(Nn=\u0026#34;否\u0026#34;, 2, 1)) # 本科 \u0026lt; 本科以上 # 本科就是只能本科，本科以上则硕士博士也能来报名 Wn = IF(Hn=\u0026#34;本科\u0026#34;,0,1) # 是否限制性别 Xn = IF(ISNUMBER(SEARCH(X$3,En)),0,1) # 是否要求夜班 Yn = IF(OR(ISNUMBER(SEARCH(\u0026#34;夜\u0026#34;, En)), ISNUMBER(SEARCH(\u0026#34;24\u0026#34;, En))),0,1) 这样，就可以根据难度排序，选出理论上最容易考的职位了\n人数监视 筛选出可以报名的职位， 正式报名之前， 最重要的参考依据就是每天下午 16:00 公布的已报名人数。\n毕竟相对难度只是理论值， 而一个难度拉满的职位如果只有1人报考， 那么就等于保送。\nOfficial Approach 查询报名人数，首先打开左侧职位报名统计页面：\n然而，每页最多显示 50 条数据， 寻找目标职位需要通过职位代码定位， 也就是说需要多次翻页：\n而且，如果翻页过于频繁还会弹窗拒绝：\n也就是说，如果筛选了60个职位， 每次查询至少需要1分钟， 则完成一轮查询需要1小时！\n自动化查询 获取 / JavaScript 首先开启开发者工具， 进行一次查询，查看请求：\n右键请求，点击 copy as fetch (复制为 JavaScript, 可以直接在控制台运行)， 然后稍加修改，包装为 Function:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 const HEADERS = { \u0026#34;accept\u0026#34;: \u0026#34;application/json, text/javascript, */*; q=0.01\u0026#34;, \u0026#34;accept-language\u0026#34;: \u0026#34;en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7\u0026#34;, \u0026#34;content-type\u0026#34;: \u0026#34;application/x-www-form-urlencoded; charset=UTF-8\u0026#34;, \u0026#34;sec-ch-ua\u0026#34;: \u0026#34;\\\u0026#34;Not_A Brand\\\u0026#34;;v=\\\u0026#34;8\\\u0026#34;, \\\u0026#34;Chromium\\\u0026#34;;v=\\\u0026#34;120\\\u0026#34;, \\\u0026#34;Google Chrome\\\u0026#34;;v=\\\u0026#34;120\\\u0026#34;\u0026#34;, \u0026#34;sec-ch-ua-mobile\u0026#34;: \u0026#34;?0\u0026#34;, \u0026#34;sec-ch-ua-platform\u0026#34;: \u0026#34;\\\u0026#34;Windows\\\u0026#34;\u0026#34;, \u0026#34;sec-fetch-dest\u0026#34;: \u0026#34;empty\u0026#34;, \u0026#34;sec-fetch-mode\u0026#34;: \u0026#34;cors\u0026#34;, \u0026#34;sec-fetch-site\u0026#34;: \u0026#34;same-origin\u0026#34;, \u0026#34;x-requested-with\u0026#34;: \u0026#34;XMLHttpRequest\u0026#34; }; const URL = \u0026#34;https://ggfw.hrss.gd.gov.cn/gwyks/exam/details/spQuery.do\u0026#34;; const REF = \u0026#34;https://ggfw.hrss.gd.gov.cn/gwyks/center.do?nvt=1\u0026#34; async function stat(cityCode, totalPages) { let res = []; for (let page = 1; page \u0026lt;= totalPages; page++) { let rawData = await fetch(URL, { \u0026#34;headers\u0026#34;: HEADERS, \u0026#34;referrer\u0026#34;: REF, \u0026#34;referrerPolicy\u0026#34;: \u0026#34;strict-origin-when-cross-origin\u0026#34;, \u0026#34;body\u0026#34;: `bfa001=202401\u0026amp;bab301=${cityCode}\u0026amp;page=${page}\u0026amp;rows=50`, \u0026#34;method\u0026#34;: \u0026#34;POST\u0026#34;, \u0026#34;mode\u0026#34;: \u0026#34;cors\u0026#34;, \u0026#34;credentials\u0026#34;: \u0026#34;include\u0026#34; }); let data = await rawData.json(); res = res.concat(data.rows); console.log(`page ${page} done, ${data.rows.length} items added, total ${res.length} items`); await new Promise(r =\u0026gt; setTimeout(r, 2000)); } return res; } 查询城市代码后调用：\n1 2 let gz = await stat(\u0026#34;01\u0026#34;, 30); JSON.stringify(gz); 点击右下角 Copy 按钮即可复制：\n处理 / Python 先将筛选出的职位代码保存到 query.txt， 随后即可编写代码，打印职位对应的报名人数：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 import json JOB_KEY = \u0026#39;bfe301\u0026#39; POP_KEY = \u0026#39;aab119\u0026#39; def save_all(): gz = json.loads(eval(input(\u0026#39;gz: \u0026#39;))) sz = json.loads(eval(input(\u0026#39;sz: \u0026#39;))) data = gz + sz with open(\u0026#39;all.json\u0026#39;, \u0026#39;w\u0026#39;) as f: json.dump(data, f) return data def get_fmt_data(data): fmt = {} for item in data: fmt[item[JOB_KEY]] = item return fmt def get_query(): with open(\u0026#39;query.txt\u0026#39;, \u0026#39;r\u0026#39;) as f: query = f.readlines() query = [i.strip() for i in query] return query if __name__ == \u0026#39;__main__\u0026#39;: all_data = save_all() fmt_data = get_fmt_data(all_data) to_query = get_query() print(f\u0026#39;Total: {len(to_query)}\u0026#39;) for i in to_query: if i in fmt_data: print(fmt_data[i][POP_KEY]) else: print(\u0026#39;?\u0026#39;) 运行后，输入数据，控制台就会按照顺序打印出职位代码对应的人数。\n粘贴到 Excel 中，就可以直观查看与比较两者：\n其他技巧 本文所述技巧基于越迟报名，获取信息越多的前提， 但是需要审核个人信息通过后才能成功报名。\n因此，一定要先点击左侧 个人信息 按钮，填好保存！！！ 提交之后就会上报审核，与报名分开， 这样最后一天报名，提交后就直接通过，不用再等待审核。\n结语 报名阶段自动化，最多只是筛选出相对容易上岸的职位， 美其名曰赢在起跑线上，但最终能否冲线还要看自己的体能。\n另外，本文只是提供了一种减少重复操作的思路， 数据一天只会更新一次，请勿频繁查询，以免违反相关法律规定。\n虽然机构应该有自己的编程大手子， 看不上我的这些蹩脚代码，但还是声明，严禁商用。\n","date":"2024-03-23T01:00:00+08:00","image":"https://blog.kmtea.eu/p/240323-civil-exam-sign/img/cover_hu_d7447092af55f736.jpg","permalink":"https://blog.kmtea.eu/p/240323-civil-exam-sign/","title":"考公报名，但是 JS \u0026 Python 赋能"},{"content":"制作 RHEL LXC 容器镜像 前言 虽然玩 Linux 很多年了，但一直以来都只是用 Debian 系的发行版，对其他的没有涉猎。 最近发现了 LXC 的美妙之处，于是试了试一直没体验过的 RHEL。\n鲁迅先生说过，中国人的性情是总喜欢调和折中的。\n作为硬件级的虚拟，VM 太过笨重，对内存的利用效率太低； 而作为应用级的虚拟，Docker 又太过轻量，systemd 也不能用， 只能用来部署单一程序。相比之下，作为系统级虚拟的 LXC 就是日常调试的最佳选择。\n踩坑 我首先尝试的是官方 docker 镜像 ubi (Universal Base Image), 通过 docker save 导出后直接导入到 PVE 中。 虽然可以启动，但是缺少太多组件，出现大量恶性问题，如无法联网等，不具备可用性。\n然后尝试了去年试过的 转生大法, 不过 convert2rhel 至今不支持 RHEL 9, 因此作罢。\n然而，ubi 的文件结构是我们的重要参考， 后续我们打包的 rootfs 要力求与之一致。\n准备 打开 ISO 下载官网, 拉到下面，选择 Boot iso 下载。当然你财力雄厚也可以选择十几G的 DVD iso\n提取 这一步要从 RHEL 完整虚拟机中提取 rootfs。\n进入右上角，安装盘选择\n下面选择自定义 Custom，否则它要给你创建 LVM 了\n点击一次 Done 后，出来如下界面\n选择标准分区 Standard Partition，然后点击上方蓝字 Click here to create them automatically\n这里直接 Done 就行，但保险起见我把文件系统设为了 ext4\n中间需要登录\n登录后下方选择安装内容\n左边选择 Minimal Install，右边什么都不选\n左下设置 root 密码就可以开始安装了\n安装完成后，重启进入系统。 建议 ssh, vnc 没法复制粘贴，属于灾难级的体验。 然后执行\n1 2 3 4 5 6 7 8 9 10 yum install -y tar cd /tmp mkdir afs boot dev home lost+found media mnt opt proc root run srv sys tmp chmod -R 777 tmp chown -R nobody:nobody proc sys cp -a /bin /etc /lib /lib64 /sbin /usr /var . rm -rf var/log/* var/cache/* var/tmp/* tar cvJf rootfs.tar.xz ./* 生成 rootfs.tar.xz 后，任选方式传到 PVE 上。\n我喜欢用 python3 -m http.server 8080， 但是要记得先关防火墙 systemctl stop firewalld。\n精简 LXC 运行环境下，固件、内核均由宿主机提供， 我们可以将其卸载，节省空间。\n由 rootfs.tar.xz 创建 lxc，启动后进入 shell\n1 2 3 4 5 6 # dnf list --installed | grep firmware # dnf list --installed | grep kernel dnf remove -y iwl100-firmware.noarch iwl1000-firmware.noarch iwl105-firmware.noarch iwl135-firmware.noarch iwl2000-firmware.noarch iwl2030-firmware.noarch iwl3160-firmware.noarch iwl5000-firmware.noarch iwl5150-firmware.noarch iwl6000g2a-firmware.noarch iwl6050-firmware.noarch iwl7260-firmware.noarch linux-firmware.noarch linux-firmware-whence.noarch dnf remove -y kernel.x86_64 kernel-core.x86_64 kernel-modules.x86_64 kernel-modules-core.x86_64 kernel-tools.x86_64 kernel-tools-libs.x86_64 dnf remove -y microcode_ctl dnf clean all 一举节省高达一半空间\n接下来是清除不必要的语言包，100M左右\n1 2 3 4 5 6 cd /usr/share/locale mkdir /tmp/locale mv en* locale.alias /tmp/locale/ rm -rf ./* mv /tmp/locale/* . rmdir /tmp/locale 可以考虑关闭在容器中无法运行的服务\n1 2 dnf remove -y audit systemctl disable chronyd.service 最终体积来到 500M 左右，与官方 templates 同一水平。\n最后和上一步一样打包即可。\n1 2 3 4 5 6 7 8 cd /tmp mkdir afs boot dev home lost+found media mnt opt proc root run srv sys tmp chmod -R 777 tmp chown -R nobody:nobody proc sys cp -a /bin /etc /lib /lib64 /sbin /usr /var . rm -rf var/log/* var/cache/* var/tmp/* tar cvJf rhel-9-minimal_9.3_amd64.tar.xz ./* 后记 有几点提醒：\n如果导入后启动，内存占用极低，终端黑屏无显示，可能是误删了 /etc 下账户文件 可通过 lxc-start -n \u0026lt;ctid\u0026gt; -F -l DEBUG 接入调试。 非常不建议分享你制作的镜像！ 首先 subscription-manager unregister 不能保证账户信息完全被抹除， 其次 /etc 下 fstab hosts hostname resolv.conf shadow 等大量文件均可能包含敏感信息。 ","date":"2023-12-04T01:00:00+08:00","image":"https://blog.kmtea.eu/p/231204-rhel-lxc/img/cover_hu_5b0c75fbd69cf83c.jpg","permalink":"https://blog.kmtea.eu/p/231204-rhel-lxc/","title":"制作 RHEL LXC 容器镜像"},{"content":"原神各版本体积 做个记录。 之前在 知乎 回答过，没人看，搬来这里。\n里程碑： 整体突破70GB: 4.0 本体突破70GB: 4.4 首次降低体积: 4.6 由于原神推出了过往资源清理功能，本文不再更新。\n5.x 5.3 游戏数据\nYuanShen_Data: 74.84 GB (+ 4.08 GB)\n含语音: 93.28 GB\n语音\nzh / en / ja / ko: 14.20 / 16.24 / 18.44 / 14.00 GB (+ 800 ~ 1000 MB)\n5.2 游戏数据\nYuanShen_Data: 70.76 GB (+ 1.45 GB)\n含语音: 88.17 GB\n语音\nzh / en / ja / ko: 13.42 / 15.46 / 17.41 / 13.17 GB (+ 300 ~ 400 MB)\n差分包\n语言 文件名 大小 / game_5.1.0_5.2.0_hdiff_grBoNSpIChrUAMud.zip 16.23 GiB zh audio_zh-cn_5.1.0_5.2.0_hdiff_YmcHmcSRXCeaTFqg.zip 281.47 MiB en audio_en-us_5.1.0_5.2.0_hdiff_oIHrItYxSNUNlFeO.zip 413.63 MiB ja audio_ja-jp_5.1.0_5.2.0_hdiff_QyrgahmLjPYFWots.zip 311.53 MiB ko audio_ko-kr_5.1.0_5.2.0_hdiff_rzWKDBwaFhfEoMDI.zip 281.78 MiB 5.1 游戏数据\nYuanShen_Data: 69.31 GB (+ 2.29 GB)\n含语音: 86.32 GB\n语音\nzh / en / ja / ko: 13.09 / 15.13 / 17.00 / 12.84 GB (- 1.68 ~ 2.10 GB)\n差分包\n语言 文件名 大小 / game_5.0.0_5.1.0_hdiff_OuXoYuKRbvmxBGvG.zip 18.00 GiB zh audio_zh-cn_5.0.0_5.1.0_hdiff_RDNLwIcyzBFLYuks.zip 550.22 MiB en audio_en-us_5.0.0_5.1.0_hdiff_mKSGNTyLLiaPNAIq.zip 522.02 MiB ja audio_ja-jp_5.0.0_5.1.0_hdiff_jnkpmmVWGoAUVpsW.zip 608.07 MiB ko audio_ko-kr_5.0.0_5.1.0_hdiff_qHrMGShtHsIcocuc.zip 526.03 MiB 5.0 游戏数据\nYuanShen_Data: 67.02 GB (+ 5.61 GB)\n含语音: 86.40 GB\n语音\nzh / en / ja / ko: 14.78 / 17.23 / 19.38 / 14.52 GB (+ 700 ~ 900 MB)\n差分包\n语言 文件名 大小 / game_4.8.0_5.0.0_hdiff_FrlPBYGVpJJEDpIB.zip 19.52 GiB zh audio_zh-cn_4.8.0_5.0.0_hdiff_ARoNSLKafiOlBItH.zip 643.26 MiB en audio_en-us_4.8.0_5.0.0_hdiff_GwMDsuYwvsWpKRls.zip 763.68 MiB ja audio_ja-jp_4.8.0_5.0.0_hdiff_WERIPnlKIkMPKEJH.zip 733.02 MiB ko audio_ko-kr_4.8.0_5.0.0_hdiff_vsyDtffXAYkEGNez.zip 617.06 MiB 4.x 4.8 游戏数据\nYuanShen_Data: 61.41 GB (+ 1.46 GB)\n含语音: 79.82 GB\n语音\nzh / en / ja / ko: 14.05 / 16.41 / 18.41 / 13.79 GB (+ 400 ~ 500 MB)\n差分包\n语言 文件名 大小 / game_4.7.0_4.8.0_hdiff_ozmRtNVvfJaBDlmd.zip 13.84 GiB zh audio_zh-cn_4.7.0_4.8.0_hdiff_QdLjeERMAoCvExzt.zip 357.67 MiB en audio_en-us_4.7.0_4.8.0_hdiff_eNAnuzbTsUXQNrla.zip 432.67 MiB ja audio_ja-jp_4.7.0_4.8.0_hdiff_pgIRBgtnJMNTtERS.zip 398.03 MiB ko audio_ko-kr_4.7.0_4.8.0_hdiff_eTQLFbEKXVztAWuM.zip 322.57 MiB 4.7 受上版本数据丢失影响，增减数据不准确\n游戏数据\nYuanShen_Data: 59.95 GB (+ 2.24 GB)\n含语音: 77.84 GB\n语音\nzh / en / ja / ko: 13.65 / 15.94 / 17.90 / 13.40 GB (+ 0 ~ 100 MB)\n差分包\n语言 文件名 大小 / game_4.6.0_4.7.0_hdiff_xrMCwjTting6IubX.zip 24.36 GiB zh zh-cn_4.6.0_4.7.0_hdiff_mRiPScjVzsZHlx1u.zip 513.59 MiB en en-us_4.6.0_4.7.0_hdiff_PeQspaEOWljGHcbS.zip 607.33 MiB ja ja-jp_4.6.0_4.7.0_hdiff_rLT1nMcAam4wgqxe.zip 579.81 MiB ko ko-kr_4.6.0_4.7.0_hdiff_ck7wjJfSXVi1svAb.zip 458.70 MiB 4.6 该版本数据丢失，数值为估算\n游戏数据\nYuanShen_Data: 57.71 GB (- 15.16 GB)\n含语音: 75.60 GB\n语音\nzh / en / ja / ko: 13.65 / 15.96 / 17.88 / 13.41 GB (+ 900 ~ 1200 MB)\n差分包\n语言 文件名 大小 / game_4.5.0_4.6.0_hdiff_kiOtCmQKDxTEojvz.zip 28.42 GiB zh zh-cn_4.5.0_4.6.0_hdiff_2a7jHyNe6YWsM3Ob.zip 306.68 MiB en en-us_4.5.0_4.6.0_hdiff_zY5rUsWHTdvLp76g.zip 399.28 MiB ja ja-jp_4.5.0_4.6.0_hdiff_Vq30AS1O9cWPbQHt.zip 338.69 MiB ko ko-kr_4.5.0_4.6.0_hdiff_DBGoIMRpaQvgleCc.zip 273.97 MiB 4.5 该版本开始不配图，懒了\n游戏数据\nYuanShen_Data: 72.87 GB (+ 0.47 GB)\n含语音: 89.55 GB\n语音\nzh / en / ja / ko: 12.73 / 14.86 / 16.68 / 12.51 GB (+ 300 ~ 500 MB)\n差分包\n语言 文件名 大小 / game_4.4.0_4.5.0_hdiff_CIwumTVOpUcZ2tJs.zip 4.84 GiB zh zh-cn_4.4.0_4.5.0_hdiff_27Q0jakwKMUm6vqz.zip 303.73 MiB en en-us_4.4.0_4.5.0_hdiff_IT8JaZr3tGK16FVp.zip 452.70 MiB ja ja-jp_4.4.0_4.5.0_hdiff_RZ0dnELT8XCpvM9q.zip 366.54 MiB ko ko-kr_4.4.0_4.5.0_hdiff_J2Ck74hirdXBMTzl.zip 299.97 MiB 4.4 游戏数据\nYuanShen_Data: 72.40 GB (+ 4.85 GB)\n语音\nzh / en / ja / ko: 12.39 / 14.38 / 16.21 / 12.15 GB (+ 400 ~ 600 MB)\n差分包\n语言 文件名 大小 / game_4.3.0_4.4.0_hdiff_HRCcTyjpAfhD9wq0.zip 7.61 GiB zh zh-cn_4.3.0_4.4.0_hdiff_nPgctCRfjFYIT9bN.zip 368.08 MiB en en-us_4.3.0_4.4.0_hdiff_dDYOZ2umezWJqjNr.zip 476.03 MiB ja ja-jp_4.3.0_4.4.0_hdiff_98p3ekZjdPlqbUMt.zip 439.98 MiB ko ko-kr_4.3.0_4.4.0_hdiff_Y2rdoEUnObK18wlP.zip 353.10 MiB 4.3 游戏数据\nYuanShen_Data: 68.55 GB (+ 1.34 GB)\n语音\nzh / en / ja / ko: 11.98 / 13.86 / 15.64 / 11.74 GB (+ 350 ~ 500 MB)\n差分包\n语言 文件名 大小 / game_4.2.0_4.3.0_hdiff_n2wPe6rv14om3DMT.zip 11.13 GiB zh zh-cn_4.2.0_4.3.0_hdiff_WViOf1Ue09GxR3n2.zip 319.50 MiB en en-us_4.2.0_4.3.0_hdiff_CinLpegA6Tx7Ru3h.zip 424.33 MiB ja ja-jp_4.2.0_4.3.0_hdiff_FgBNHKTLYXxmeiIv.zip 393.26 MiB ko ko-kr_4.2.0_4.3.0_hdiff_K4l9INOLtXWok2gQ.zip 311.52 MiB 4.2 游戏数据\nYuanShen_Data: 67.21 GB (+ 4.18 GB)\n语音\nzh / en / ja / ko: 11.62 / 13.41 / 15.15 / 11.38 GB (+ 550 ~ 700 MB)\n差分包\n语言 文件名 大小 / game_4.1.0_4.2.0_hdiff_muBp8rd2jUzsaOCg.zip 13.11 GiB zh zh-cn_4.1.0_4.2.0_hdiff_nh9PQk51UuE7dmqH.zip 448.74 MiB en en-us_4.1.0_4.2.0_hdiff_mIywVGEvAY9qlkzt.zip 586.78 MiB ja ja-jp_4.1.0_4.2.0_hdiff_oTbeQjA1fMXcZKzm.zip 531.08 MiB ko ko-kr_4.1.0_4.2.0_hdiff_iMCgobAXWZNP3wRy.zip 466.59 MiB 4.1 游戏数据\nYuanShen_Data: 63.03 GB (+ 6.13 GB)\n语音\nzh / en / ja / ko: 11.07 / 12.77 / 14.44 / 10.84 GB (+ 600 ~ 850 MB)\n差分包\n语言 文件名 大小 / game_4.0.1_4.1.0_hdiff_kSHavhPZp92sLMt3.zip 13.50 GiB zh zh-cn_4.0.1_4.1.0_hdiff_HNstacPevd6XZq0D.zip 523.93 MiB en en-us_4.0.1_4.1.0_hdiff_p5wjiT2WqdlEaxVR.zip 678.62 MiB ja ja-jp_4.0.1_4.1.0_hdiff_40MlZ96BrAekQjTw.zip 649.35 MiB ko ko-kr_4.0.1_4.1.0_hdiff_HY3acWFwSnD12h6L.zip 532.69 MiB 4.0 游戏数据\nYuanShen_Data: 56.90 GB (+ 7.01 GB)\n语音\nzh / en / ja / ko: 10.45 / 12.04 / 13.59 / 10.23 GB (+ 800 ~ 1000 MB)\n差分包\ngame_3.8.0_4.0.0_hdiff_hash.zip: 31.38 GB\n3.x 3.8 游戏数据\nYuanShen_Data: 49.89 GB (+ 0.84 GB)\n语音\nzh / en / ja / ko: 9.72 / 11.21 / 12.63 / 9.52 GB (+ 300 ~ 500 MB)\n差分包\ngame_3.7.0_3.8.0_hdiff_hash.zip: 10.19 GB\n3.7 游戏数据\nYuanShen_Data: 49.05 GB (+ 1.04 GB)\n语音\nzh / en / ja / ko: 9.38 / 10.79 / 12.15 / 9.18 GB (+ 400 ~ 600 MB)\n差分包\ngame_3.6.0_3.7.0_hdiff_hash.zip: 8.27 GB\n3.6 游戏数据\nYuanShen_Data: 48.01 GB (+ 2.98 GB)\n语音\nzh / en / ja / ko: 8.97 / 10.28 / 11.55 / 8.79 GB (+ 500 ~ 700 MB)\n差分包\ngame_3.5.0_3.6.0_hdiff_hash.zip: 9.80 GB\n3.5 游戏数据\nYuanShen_Data: 45.03 GB\n语音\nzh / en / ja / ko: 8.44 / 9.64 / 10.84 / 8.25 GB\n","date":"2023-11-06T16:00:00+08:00","image":"https://blog.kmtea.eu/p/231106-genshin-size/img/cover_hu_9241114a5d1342e3.jpg","permalink":"https://blog.kmtea.eu/p/231106-genshin-size/","title":"原神各版本体积"},{"content":"SaaS 平台 Python 应用部署实战 如果你还不知道， 现在各大云服务巨头都提供了 永久免费 的 Serverless 服务， 适合托管一些很小的应用。\n想把去年写的一个 Telegram 超轻量 bot 部署到 Azure Functions 上， 结果被微软念经一样的文档气得不轻， 遂决定写一篇 walkthrough 记录下。\n本教程所使用的代码放在 KumaTea/KumaLiteBot 这个 repo 里。\n目前示例 bot Kuma 发癫 Bot 托管在 Azure 上面。\nGoogle Cloud Functions 谷歌的配置过程是最直观、方便、省心的， 其实这个bot之前就托管在谷歌云上， 但是因为有隐性收费就关掉了。 只能说贵有贵的道理。\n创建 Functions 先进入 Functions 界面\n点蓝色的创建\n基础信息，喜欢的名字就好\nRegion 这里，一般根据最多人访问的地区来选\n因为我是 Telegram Bot, 选择 API 所在地荷兰阿姆斯特丹\nTrigger 这里 Auth 选择允许未认证调用\n你也不想每次打开都要输密码吧\n下面配置按需求选， 我的 bot 用不到默认的 256 MB 就选了最小的\n环境变量记得 在 SECURITY AND IMAGE REPO 设置\n如果弹出启用 API 允许即可\n录入代码 选择语言和版本\n右边编辑器可以粘贴自己的代码了。\n注意， Entry point 这里要写的是你程序的入口， 一般是 main\n主函数示例：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 @functions_framework.http def main(request): res = \u0026#39;\u0026#39; try: if not request.method == \u0026#34;POST\u0026#34;: return \u0026#39;I am working!\u0026#39; update = Update.de_json(request.get_json(force=True), bot) if update.inline_query: res = inline(request) elif update.message: msg = update.message if msg.chat.id \u0026gt; 0: res = msg.reply_text(nonsense_reply()) else: logger.info(\u0026#39;Unknown type. Ignoring...\u0026#39;) except Exception as e: logger.debug(str(request.get_json(force=True))) logger.error(str(e)) return res if type(res) is str else \u0026#39;\u0026#39; request 就是一个标准的 flask.request 对象， 非常友好，与楼下高下立判\n然后点击左侧 requirements.txt\n把依赖贴进去，就可以点下面的 Deploy 了\n其他设置 可以看到这里我失败了，因为忘了设置环境变量\n我需要的变量是认证的 BOT_TOKEN, 安全地 设置这个变量会很麻烦，介绍如下\n点击上方 Edit\n进入 SECURITY AND IMAGE REPO\n点击 ADD A SECRET REFERENCE\n这个时候会发现创建是灰的\n就需要先启用这个什么 Secret API\n点击左边 ENTER SECRET MANUALLY 就会弹出带你去的窗口\n启用后回来刷新重新进入修改，就能看到可以创建了，右边会弹出窗口\nName 随便写，下面的 value 填你的 token\n然后 CREATE SECRET\nReference method 选中暴露为环境变量\n下面环境变量输入你需要的，比如 BOT_TOKEN\n至于上面提示没有权限，实测没有影响\n这是安全的方法，那么有没有不安全的呢？\n当然有\n首先 Cloud Functions v1 就没有这么多幺蛾子\n只要在创建或者修改里面 RUNTIME 下面 environment variables 里面填就好了\n当然你也可以直接写进代码里\n完成 OK, 这就完了\nGCP 会自动开始 build 并部署\n可以看见已经成功运行\n小提示 Cloud Functions 有免费额度， 但 Storage 没有。\n部署完成后可以直接删掉自动生成的 buckets 避免扣钱， 完全不影响 bot 运行\nAWS Lambda AWS Lambda 比 GCP Cloud Functions 多一步手动上传依赖的步骤\n创建 Lambda 在开始之前，记得先在右上角选择你想要的地区\nAWS 和别人不一样，它是先选地区，在这里创建的所有资源都会在这个区域\n右上角黄色按钮创建\n名字，语言和版本，架构\n下方高级设置，要勾上 Enable Function URL, 这样才能从 URL 访问；\nAuth type 选 None\n填入代码 向下拉，把代码粘贴进编辑器，保存即可\n主函数示例：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 def lambda_handler(event, context): res = { \u0026#39;statusCode\u0026#39;: 200, \u0026#39;body\u0026#39;: \u0026#39;\u0026#39; } method = event[\u0026#39;requestContext\u0026#39;][\u0026#39;http\u0026#39;][\u0026#39;method\u0026#39;] try: if not method == \u0026#34;POST\u0026#34;: res[\u0026#39;body\u0026#39;] = \u0026#39;I am working!\u0026#39; return res update = Update.de_json(json.loads(event[\u0026#39;body\u0026#39;]), bot) if update.inline_query: res[\u0026#39;body\u0026#39;] = str(inline(update)) elif update.message: msg = update.message if msg.chat.id \u0026gt; 0: res[\u0026#39;body\u0026#39;] = str(msg.reply_text(nonsense_reply())) else: logger.info(\u0026#39;Unknown type. Ignoring...\u0026#39;) except Exception as e: logger.error(str(event)) logger.error(str(e)) return res event 示例\nGET: {'version': '2.0', 'routeKey': '$default', 'rawPath': '/', 'rawQueryString': 'key=value', 'headers': {'sec-fetch-mode': 'navigate', 'x-amzn-tls-version': 'TLSv1.2', 'sec-fetch-site': 'none', 'accept-language': 'en-US,en;q=0.9', 'x-forwarded-proto': 'https', 'x-forwarded-port': '443', 'x-forwarded-for': '103.172.80.149', 'sec-fetch-user': '?1', 'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7', 'x-amzn-tls-cipher-suite': 'ECDHE-RSA-AES128-GCM-SHA256', 'sec-ch-ua': '\u0026quot;Google Chrome\u0026quot;;v=\u0026quot;117\u0026quot;, \u0026quot;Not;A=Brand\u0026quot;;v=\u0026quot;8\u0026quot;, \u0026quot;Chromium\u0026quot;;v=\u0026quot;117\u0026quot;', 'sec-ch-ua-mobile': '?0', 'x-amzn-trace-id': 'Root=1-65284b56-7a462eea204cb5a45d3c0668', 'sec-ch-ua-platform': '\u0026quot;Windows\u0026quot;', 'host': '7o22cfijy5jiujzbih6aov5yvy0hasni.lambda-url.eu-central-1.on.aws', 'upgrade-insecure-requests': '1', 'accept-encoding': 'gzip, deflate, br', 'sec-fetch-dest': 'document', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36'}, 'queryStringParameters': {'key': 'value'}, 'requestContext': {'accountId': 'anonymous', 'apiId': '7o22cfijy5jiujzbih6aov5yvy0hasni', 'domainName': '7o22cfijy5jiujzbih6aov5yvy0hasni.lambda-url.eu-central-1.on.aws', 'domainPrefix': '7o22cfijy5jiujzbih6aov5yvy0hasni', 'http': {'method': 'GET', 'path': '/', 'protocol': 'HTTP/1.1', 'sourceIp': '103.172.80.149', 'userAgent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36'}, 'requestId': '90551f3b-4891-4b37-9aeb-71e2fae50ad1', 'routeKey': '$default', 'stage': '$default', 'time': '12/Oct/2023:19:39:02 +0000', 'timeEpoch': 1697139542555}, 'isBase64Encoded': False}\nPOST: {'version': '2.0', 'routeKey': '$default', 'rawPath': '/', 'rawQueryString': '', 'headers': {'content-length': '372', 'x-amzn-tls-cipher-suite': 'ECDHE-RSA-AES128-GCM-SHA256', 'x-amzn-tls-version': 'TLSv1.2', 'x-amzn-trace-id': 'Root=1-65284b9f-3fff13e27bc794f95e3dbc98', 'x-forwarded-proto': 'https', 'host': '7o22cfijy5jiujzbih6aov5yvy0hasni.lambda-url.eu-central-1.on.aws', 'x-forwarded-port': '443', 'content-type': 'application/json', 'x-forwarded-for': '91.108.6.19', 'accept-encoding': 'gzip, deflate'}, 'requestContext': {'accountId': 'anonymous', 'apiId': '7o22cfijy5jiujzbih6aov5yvy0hasni', 'domainName': '7o22cfijy5jiujzbih6aov5yvy0hasni.lambda-url.eu-central-1.on.aws', 'domainPrefix': '7o22cfijy5jiujzbih6aov5yvy0hasni', 'http': {'method': 'POST', 'path': '/', 'protocol': 'HTTP/1.1', 'sourceIp': '91.108.6.19', 'userAgent': None}, 'requestId': '9fc841ed-6d28-461e-a657-565813752326', 'routeKey': '$default', 'stage': '$default', 'time': '12/Oct/2023:19:40:15 +0000', 'timeEpoch': 1697139615123}, 'body': '{\u0026quot;update_id\u0026quot;:11992905,\\n\u0026quot;message\u0026quot;:{\u0026quot;message_id\u0026quot;:20,\u0026quot;from\u0026quot;:{\u0026quot;id\u0026quot;:5273618487,\u0026quot;is_bot\u0026quot;:false,\u0026quot;first_name\u0026quot;:\u0026quot;Kuma\u0026quot;,\u0026quot;last_name\u0026quot;:\u0026quot;Tea\u0026quot;,\u0026quot;username\u0026quot;:\u0026quot;realKumaTea\u0026quot;,\u0026quot;language_code\u0026quot;:\u0026quot;en\u0026quot;},\u0026quot;chat\u0026quot;:{\u0026quot;id\u0026quot;:5273618487,\u0026quot;first_name\u0026quot;:\u0026quot;Kuma\u0026quot;,\u0026quot;last_name\u0026quot;:\u0026quot;Tea\u0026quot;,\u0026quot;username\u0026quot;:\u0026quot;realKumaTea\u0026quot;,\u0026quot;type\u0026quot;:\u0026quot;private\u0026quot;},\u0026quot;date\u0026quot;:1697139614,\u0026quot;text\u0026quot;:\u0026quot;/start\u0026quot;,\u0026quot;entities\u0026quot;:[{\u0026quot;offset\u0026quot;:0,\u0026quot;length\u0026quot;:6,\u0026quot;type\u0026quot;:\u0026quot;bot_command\u0026quot;}]}}', 'isBase64Encoded': False}\nLambda 回传的 response['body'] 必须是 str 类型， 否则会报 [ERROR] Runtime.MarshalError: Unable to marshal response\n上传依赖 这个时候如果直接部署会报错：找不到依赖\nAWS Lambda 奇葩的设计导致我们不能上传 requirements.txt 让它自己安装， 必须自己手动下载依赖并上传。\n首先需要找一台 Linux 机器，运行 docker\n1 docker run -it --rm --name test python:3.11-slim /bin/bash 然后安装所需依赖\n1 2 3 4 5 6 apt update -qq \u0026amp;\u0026amp; apt install zip -y -qq cd /tmp mkdir python pip install \u0026#34;python-telegram-bot\u0026lt;20\u0026#34; -t python -q zip -r python.zip python 再把生成的 python.zip 复制出来\n记得新开个 shell 别傻乎乎把 docker 退了\n1 docker cp test:/tmp/python.zip . Docker 容器这个时候可以关了\n继续下拉，在 Layers 这里点击 Add a layer\n点 AWS layers 上面那行小字 create a new layer\n随便写，上传，提交\n重新回到 Lambda dashboard，拉到下面， 点开熟悉的 Add a layer， 选择 Custom layers，选刚刚创建的，右下角 Add\n最后点 Code Source 旁边的 Deploy\n其他设置 环境变量在下方 Configuration - Environment variables 里面， 设置简单不再赘述。\n完成 已成功运行\nAzure Functions Azure 更是重量级，Web 端功能复杂甚至缺失， 必须使用 VS Code 才能完整部署\n准备 你需要安装一个 VS Code\n然后安装 Azure Functions 插件\n安装好之后，会在左边栏看到一个 A 图标\n点击并登录，直到看到你使用的产品都列出了\n创建 Functions 左下角 Workspace，鼠标移上去会有一个 Functions 图标出现\n点击第二个 Create New Project\n回到上方，选择一个空文件夹\n语言根据需要选，模型默认 V2, Python 环境可以选择有的也可以跳过\nTemplate 选择 HTTP Trigger\nTrigger 名称是你的 API 路径，这里我改成了 bot\n然后认证选择 Anonymous\n就可以打开生成的代码文件编辑了\n填入代码 首先这个 Create New Function 是没有用的\n它不过是在你的代码里加一个入口，可以自己写\n把代码贴进去就好了，不赘叙\n主函数示例：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 @app.route(route=\u0026#34;bot\u0026#34;, auth_level=func.AuthLevel.ANONYMOUS) def main(req): res = \u0026#39;\u0026#39; try: if not req.method == \u0026#34;POST\u0026#34;: return \u0026#39;I am working!\u0026#39; update = Update.de_json(req.get_json(), bot) if update.inline_query: res = inline(update) elif update.message: msg = update.message if msg.chat.id \u0026gt; 0: res = msg.reply_text(nonsense_reply()) else: logger.info(\u0026#39;Unknown type. Ignoring...\u0026#39;) except Exception as e: logger.debug(str(req.get_json())) logger.error(str(e)) return res if type(res) is str else \u0026#39;\u0026#39; 这里要特别注意的是， 入口参数 必须是 req， 如果不一致，部署后会找不到 HTTP Trigger!!!\n微软没有任何文档提到这一点！我是怎么发现的呢？\n原先一直用的是 request 当入口， 因为一直部署失败，乱翻文档，在 HTTP Trigger 看到这么一句\ntrigger_arg_name\tArgument name for HttpRequest, defaults to \u0026lsquo;req\u0026rsquo;.\n没事限制参数干嘛？我就改成 req 居然就成功了\n部署和设置 工作区 Azure 图标 - Create Function App in Azure\n会需要你填写一个唯一的不重复的名字，因为这个到时候会写到 API 的 URL 里面\n我这里用的是 kmlt\n然后选择环境和地区，完成和等待创建即可\n随后上方可见刚刚创建的 Function App\n创建好，部署之前， 如果你有环境变量需要设置， 点开 Azure - Resources - Function App - kmlt, 在 Application Settings 上右键， 在弹出窗口中分别填入环境变量的名字和值\n完成后，点击 Functions 图标，选择 Deploy to Function App\u0026hellip;\n上方选择刚创建的， 弹出警告点 Deploy\n右下角会开始输出部署 log\n完成 完成后 log 会显示你的 Trigger URL\n可以打开 URL 测试\n总结 平心而论， Azure 的部署过程其实是很方便的， 尤其是对于那些用惯了 VS Code 的人来说。\n然而由于微软的文档过于语焉不详才让我吃了那么多苦头， 甚至没有这件事就没有这篇发奋而作的 blog， 笑死。\n","date":"2023-10-13T16:00:00+08:00","image":"https://blog.kmtea.eu/p/231013-saas/img/cover_hu_b4e404a9ba77091e.jpg","permalink":"https://blog.kmtea.eu/p/231013-saas/","title":"SaaS 平台 Python 应用部署实战"},{"content":"诺基亚贝尔光猫宽带密码破解提取 前言 本教程适用于诺基亚贝尔光猫，型号 HGW 或 G-140W-**\n此型号的光猫不可开启 telnet:\nhttp://192.168.1.1/getpage.gch?pid=1002\u0026amp;nextpage=tele_sec_tserver_t.gch http://192.168.1.1/cgi-bin/telnetenable.cgi?telnetenable=1 以上地址均无效。\nF12 大法无效：\n密码 文本框一经选中内容就会消失；\n使用 F12 审查元素，会发现该处明文为 !!!@@@ ，不是合法的宽带拨号密码。\n教程 1. 登录 1 2 username: CMCCAdmin password: aDm8H%MdA 2. 打开如下地址 http://192.168.1.1/dumpdatamodel.cgi\n搜索宽带账号 (如 139.gd) 在下方找到密码字段。\n3. 提取密码 Ref: thedroidgeek / nokia-router-cfg-tool.py\n首先安装依赖\n1 conda install pycryptodome || pip install pycryptodome 随后运行：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 import base64 class RouterCrypto: def __init__(self): from Crypto.Cipher import AES # key and IV for AES key = \u0026#39;3D A3 73 D7 DC 82 2E 2A 47 0D EC 37 89 6E 80 D7 2C 49 B3 16 29 DD C9 97 35 4B 84 03 91 77 9E A4\u0026#39; iv = \u0026#39;D0 E6 DC CD A7 4A 00 DF 76 0F C0 85 11 CB 05 EA\u0026#39; # create AES-128-CBC cipher self.cipher = AES.new(bytes(bytearray.fromhex(key)), AES.MODE_CBC, bytes(bytearray.fromhex(iv))) def decrypt(self, data): output = self.cipher.decrypt(data) # remove PKCS#7 padding return output[:-ord(output[-1:])] encrypted = input(\u0026#39;请输入密码字串：\u0026#39;) print(\u0026#39;解密密码为：\u0026#39;, RouterCrypto().decrypt(base64.b64decode(encrypted)).decode(\u0026#39;UTF-8\u0026#39;)) 运行上述代码，即可解密密码 (一般为6位数字)。\n","date":"2023-07-18T21:00:00+08:00","image":"https://blog.kmtea.eu/p/230718-modem-decrypt/img/cover_hu_d04b70be981ef09.jpg","permalink":"https://blog.kmtea.eu/p/230718-modem-decrypt/","title":"诺基亚贝尔光猫宽带密码破解提取"},{"content":"Apple Pay 绑卡失败原因速查 先上目前绑卡截图镇楼\n常见错误 你的发卡机构尚不支持此卡片 Your issuer does not yet offer support for this card\n正在绑定的是中国大陆发行的非银联卡 卡的设备限制 Card device limit\n已经在其他手机绑定了改卡，需解绑 如果确认已解绑多余设备， 可尝试等待3天 卡信息无效 Invalid card\n卡片未激活 有些卡，如农行的信用卡，面签完还要在手机银行再激活一次，尚未激活就会出现这个错误信息，可以进入手机银行查看卡片激活状态 该卡号今日 已失败5次 ，明日再试 未添加此卡 Could not add card\nCard not added\n原因不明，建议跟客服对线 关于中行疑难杂症，请见下文 客服聊天记录 建议：先找银联问错误代码，再找对应银行；\n银联首选云闪付线上客服，银行首选电话客服。\n银联 碰到绑不上的问题可以先向银联咨询错误代码\n中国银行 中行电话客服才有足够权限，在线客服只能问到通用信息\n每人无论单个或多个设备，最多存在 3张 已绑定的中行借记卡 (即包含 同一张卡绑定3台设备的情况) 有评论 称，中行最多绑定两张卡。 我自己的情况正是这样 所有银行卡合计超出上限 (iOS 17 以上 移除了 这个上限) 参考资料 中国银行绑定 Apple Pay 失败的解决方法 我与该博主相似的地方有：\n第一次绑卡时收到了银联的风控电话 绑卡失败代码都是 93608 钱包解绑银行卡后无法再重新绑定，提示设备限制 ","date":"2023-06-17T15:00:00+08:00","image":"https://blog.kmtea.eu/p/230617-apple-pay/img/err-invalid_hu_18d7b2eb77de2817.jpg","permalink":"https://blog.kmtea.eu/p/230617-apple-pay/","title":"Apple Pay 绑卡失败原因速查"},{"content":"办卡列表 年份代表办卡时间而非卡片推出时间 图片下方的数字是 Tweet ID 汇总 该表格为现有卡统计 双标卡每张计数 0.5 到期换卡、更换卡面均计入销卡 银联 VISA MC AE 中行 储2 信0.5 信0.5 储1 农行 信1 工行 储2 信1 信1 建行 储1 招行 储1 兴业 储1 浦发 储1 中信 储2 储1 港中 储1 储1 港汇 储1 储1 众安 储1 总计 储12 信2.5 储1信1.5 储3 储1 已销 储8 信4 储1 信1 储2 2025 中国工商银行 - 星座卡 卡组织：银联 + VISA 分类：信用卡 等级：白金卡 途径：线下 现状：在用 Apple Pay：✅ 兴业银行 - 寰宇人生卡 卡组织：银联 分类：借记卡 等级：普卡 途径：网申 现状：在用 Apple Pay：✅ 2024 中银香港 - 扣账卡 卡组织：Mastercard 分类：借记卡 等级：Platinum 途径：网申 现状：在用 Apple Pay：✅ 汇丰香港 - 扣账卡 卡组织：Mastercard 分类：借记卡 等级：World 途径：网申 现状：在用 Apple Pay：✅ 中信银行 - 崩坏星穹铁道联动卡 68可以买非接触无芯片卡+周边\n但是不是二次元所以免费的就够了\n卡组织：银联 分类：借记卡 等级：普卡 途径：网申 现状：在用 Apple Pay：⚠️ 默认卡面 ZA Bank - ZA Card 实体卡寄送非香港地址收费 HKD 25\n另：8月15日起涨价至 HKD 35\n卡组织：VISA 分类：借记卡 等级：普卡 途径：网申 现状：在用 Apple Pay：✅ 中国农业银行 - 悦卡 趁学信网不在籍的空档办的信用卡\n因为有信用卡了，申的白金，没想到竟然批了\n而且自查征信，发现农行根本不查就批了\n卡组织：银联 分类：信用卡 等级：白金卡 途径：网申 现状：在用 Apple Pay：✅ 中信银行 - 校园卡 卡组织：银联 分类：借记卡 等级：白金卡 途径：统一办理 现状：在用 Apple Pay：⚠️ 默认卡面 中国银行 - 国航联名卡 凤凰知音国航中银信用卡\n介绍1 介绍2 申请\n卡组织：银联 + VISA 分类：信用卡 等级：普卡 途径：网申 现状：在用 Apple Pay：✅ 中银香港 - 中银卡 无门槛开户默认卡\n卡组织：银联 分类：借记卡 等级：普卡 途径：线下 现状：在用 Apple Pay：✅ 汇丰香港 - 提款卡 无门槛开户默认卡\n俗称「红狮子」\n卡组织：银联 分类：借记卡 等级：普卡 途径：线下 现状：在用 Apple Pay：✅ 2023 中信银行 - 运通 金卡借记卡\n介绍页\n卡组织：American Express 分类：借记卡 等级：金卡 途径：网申 现状：在用 Apple Pay：❌ 非银联卡 中国建设银行 - Line Friends 同样是大学生信用卡。毕业那年再申。\n介绍页\n卡组织：银联 分类：信用卡 等级：金卡 途径：网申 现状：销卡 Apple Pay：✅ 中国银行 - 冰雪卡 全世界门槛最低的银联白金卡\n介绍页\n卡组织：银联 分类：借记卡 等级：白金卡 途径：线下 现状：在用 Apple Pay：✅ 中国工商银行 - 星座卡 (学生) 大学生信用卡\n卡组织：银联 + VISA 分类：信用卡 等级：普卡 途径：网申 现状：销卡 Apple Pay：✅ 浦发银行 - 30周年 办卡理由：好看\n卡组织：银联 分类：借记卡 等级：金卡 途径：网申 现状：在用 Apple Pay：✅ 广发银行 - 运通 Lucky 第二张……\n介绍页\n卡组织：American Express 分类：借记卡 等级：普卡 途径：网申 现状：销卡 Apple Pay：❌ 非银联卡 兴业银行 - 运通 第一张运通卡\n介绍页\n卡组织：American Express 分类：借记卡 等级：普卡 途径：网申 现状：销卡 Apple Pay：❌ 非银联卡 2022 中国银行 - 低碳 数字人民币实体卡\n介绍页\n不属于银行卡，但是因为长得像所以放上来\n分类：借记卡 途径：网申 现状：在用 中国工商银行 - 如意凤凰 之前自己办的那张卡学校不让用\n介绍页\n卡组织：银联 分类：借记卡 等级：普卡 途径：统一办理 现状：销卡 Apple Pay：⚠️ 默认卡面 中国银行 - 莫奈 年轻人的第一张世界卡\n介绍页\n卡组织：Mastercard 分类：借记卡 等级：World 途径：网申 现状：在用 Apple Pay：❌ 非银联卡 中国工商银行 - 故宫 当时需要一张工行卡收补贴，觉得这张好看就办了\n介绍页\n卡组织：银联 分类：借记卡 等级：普卡 途径：线下 现状：销卡 Apple Pay：⚠️ 默认卡面 中国银行 - 洛天依 我去，洛天依！\n介绍页\n卡组织：银联 分类：借记卡 等级：普卡 途径：网申 现状：在用 Apple Pay：✅ 2021 招商银行 - 明日方舟 我超，舟！\n介绍页\n卡组织：银联 分类：借记卡 等级：普卡 途径：线下 现状：在用 Apple Pay：✅ 2020 招商银行 - Young 第一张学生信用卡\n卡组织：银联 分类：信用卡 等级：普卡 途径：网申 现状：销卡 Apple Pay：✅ ","date":"2023-06-03T15:00:00+08:00","image":"https://blog.kmtea.eu/p/230603-bank-cards/img/cover_hu_5de288c59f7d919a.jpg","permalink":"https://blog.kmtea.eu/p/230603-bank-cards/","title":"办卡列表"},{"content":"PVE 更新 OpenWrt 准备工作 OpenWrt 固件 建议编译时 不要 选中 gzip 压缩，否则容易出现各种奇妙的问题 一般情况下不选用名称带有 rootfs 的固件 USB 网卡 (可选) 如果你和我一样把全部网口都直通了，则需要在更新时使用其他的方式连接到 PVE PVE 默认不会自动启用新插入的网卡，你可能需要 ifup enx00xxxxxxxxxx \u0026amp;\u0026amp; ip link set dev enx00xxxxxxxxxx up 其中网卡名 enx00xxxxxxxxxx 可以在 ifconfig 查询 为什么不能用正常方式升级？ 众所周知，OpenWrt 正常升级方式是在 系统 - 备份升级 中升级：\n但你会发现 x86 固件是不包含 sysupgrade 固件的：\n所以，对于运行在 Proxmox VE 中的 OpenWrt 虚拟机，我们只能通过手动方式升级\n在开始之前，请确保你划分了一块虚拟硬盘作为 overlay 分区放置配置。\n如果没有，我强烈建议你花十分钟搜下教程 (关键词 extroot overlay) 完成这件事， 功在当代利在千秋\n上传新固件 上传到 local - ISO\n推荐检查 sha256sum\n更换系统固件 在以非目标 OpenWrt 内网的方式连接 PVE 的情况下，关闭虚拟机 可以用 PVE 的 Shutdown 按钮，也可以在 Console 输入 poweroff 选中系统盘 点击 Detach 并确认 再在下方找到 Unused Disk 0 并 Remove 删除 导入新固件 来到 PVE 的 Console 输入： qm importdisk 101 /var/lib/vz/template/iso/openwrt-x86-64-generic-squashfs-combined-efi.img local-lvm 其中 101 是你的 OpenWrt 虚拟机 ID 随后一个新的 Unused Disk 0 出现了 启用新系统盘 选中新的 Unused Disk 0 并点击 Edit，确认即可 启动虚拟机 恢复配置 按一下回车激活 Console 此时，原先的 overlay 会被自动挂载为 /mnt/sda1 (有时是 sdb1) 我们可以发现，该目录下 etc 内含有一 .extroot-uuid 文件。 这一文件会误导系统读取正确的 UUID 并导致无法挂载！ 使用 rm -rf /mnt/sda1/etc 将之删除。 /etc/fstab 也是没用的： rm -f /etc/fstab 查看自动生成的 /etc/config/fstab 去掉用不到的 boot 挂载 把 sda1 的 UUID 移动到 overlay 配置下 保存后重启 把修改的 /etc/config/fstab 同步到配置分区 cp -a /etc/config/fstab /mnt/sda1/upper/etc/config/ 完成 重启 检查 df -h，可发现配置分区已成功挂载！ References 我被万恶的 .extroot-uuid 困扰了几个月之久，直到看到了 这篇帖子\n因此写这篇教程广而告之。\n","date":"2022-12-27T17:00:00+08:00","image":"https://blog.kmtea.eu/p/221227-pve-openwrt/img/cover_hu_97e6d265e9ffd958.jpg","permalink":"https://blog.kmtea.eu/p/221227-pve-openwrt/","title":"PVE 更新 OpenWrt 教程"},{"content":"Add glibc to OpenWrt 中文版\nI\u0026rsquo;m trying to replace traceroute with a tool called BestTrace, but an error was raised during execution:\nFailed to execute process \u0026lsquo;./besttrace\u0026rsquo;. Reason:\nThe file \u0026lsquo;./besttrace\u0026rsquo; does not exist or could not be executed.\nCheck the executable with file:\nbesttrace: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, Go BuildID=1c1dnBC1TKT-wnm6J_Ek/Csaj2Jrm0niZmmJ8paMZ/_hoguDO-XKYO0IWEnHWa/H2kGhpM-teit7NepUJE5, not stripped\nNoticed that, interpreter /lib64/ld-linux-x86-64.so.2, which means the arch x86-64 is correct, but glibc runtime is missing.\nSince 2015, for consideration of the space and speed of embedded devices, OpenWrt has swutched to musl from uClibc as C library.\nWhereas nowadays most software are using glibc, which cannot be run on OpenWrt.\nSolution Just copy ld-linux-x86-64.so.2 here!\nDocker If Docker is installed:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #!/usr/bin/env bash set -ex # working directory # change to /opt, /usr/share or something else if you like WK_DIR=\u0026#34;/root/data\u0026#34; mkdir -p $WK_DIR cd $WK_DIR # pull Ubuntu docker pull ubuntu:jammy # start a container docker run -itd --name glibc ubuntu:jammy # copy libs docker cp -a glibc:/lib/x86_64-linux-gnu . # link ln -s \u0026#34;$WK_DIR/x86_64-linux-gnu\u0026#34; /lib/x86_64-linux-gnu || echo \u0026#34;Link already exists.\u0026#34; ln -s \u0026#34;$WK_DIR/x86_64-linux-gnu/ld-linux-x86-64.so.2\u0026#34; /lib/ld-linux-x86-64.so.2 || echo \u0026#34;Link already exists.\u0026#34; # cleanup docker stop glibc docker rm glibc docker rmi ubuntu:jammy This means you can always get the latest libs, and switch to other distros you like.\nDirectly Note: glibc v2.35, packed on 2022-10-03, could be outdated.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #!/usr/bin/env bash set -ex # working directory # change to /opt, /usr/share or something else if you like WK_DIR=\u0026#34;/root/data\u0026#34; mkdir -p $WK_DIR cd $WK_DIR # download wget \u0026#34;https://github.com/KumaTea/blog/releases/download/221003/glibc.tar.gz\u0026#34; # decompress tar -xzf glibc.tar.gz # link ln -s \u0026#34;$WK_DIR/x86_64-linux-gnu\u0026#34; /lib/x86_64-linux-gnu || echo \u0026#34;Link already exists.\u0026#34; ln -s \u0026#34;$WK_DIR/x86_64-linux-gnu/ld-linux-x86-64.so.2\u0026#34; /lib/ld-linux-x86-64.so.2 || echo \u0026#34;Link already exists.\u0026#34; # cleanup rm -f glibc.tar.gz After these instructions the program can be run successfully.\n","date":"2022-10-03T16:30:00+08:00","image":"https://blog.kmtea.eu/p/221003-glibc-openwrt/img/cover.jpg","permalink":"https://blog.kmtea.eu/p/221003-glibc-openwrt-en/","title":"Add glibc to OpenWrt"},{"content":"向 OpenWrt 添加 glibc English version\n今天试图在 OpenWrt 软路由上使用 BestTrace 替换 traceroute， 但下载完成后运行却出现了错误：\nFailed to execute process \u0026lsquo;./besttrace\u0026rsquo;. Reason:\nThe file \u0026lsquo;./besttrace\u0026rsquo; does not exist or could not be executed.\n使用 file 检查文件：\nbesttrace: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, Go BuildID=1c1dnBC1TKT-wnm6J_Ek/Csaj2Jrm0niZmmJ8paMZ/_hoguDO-XKYO0IWEnHWa/H2kGhpM-teit7NepUJE5, not stripped\n注意到 interpreter /lib64/ld-linux-x86-64.so.2， 说明架构 x86-64 无误，但缺少了 glibc 运行库。\n自 2015 以后，为了嵌入式设备的体积及运行速度考虑 ， OpenWrt 使用 musl 作为 C 运行库。\n然而现在大部分软件都使用 glibc，在 OpenWrt 上就不能运行了。\n解决方案 只要把 ld-linux-x86-64.so.2 复制进来就好了！\nDocker 如果安装了 Docker 可以使用如下脚本：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #!/usr/bin/env bash set -ex # working directory # change to /opt, /usr/share or something else if you like WK_DIR=\u0026#34;/root/data\u0026#34; mkdir -p $WK_DIR cd $WK_DIR # pull Ubuntu docker pull ubuntu:jammy # start a container docker run -itd --name glibc ubuntu:jammy # copy libs docker cp -a glibc:/lib/x86_64-linux-gnu . # link ln -s \u0026#34;$WK_DIR/x86_64-linux-gnu\u0026#34; /lib/x86_64-linux-gnu || echo \u0026#34;Link already exists.\u0026#34; ln -s \u0026#34;$WK_DIR/x86_64-linux-gnu/ld-linux-x86-64.so.2\u0026#34; /lib/ld-linux-x86-64.so.2 || echo \u0026#34;Link already exists.\u0026#34; # cleanup docker stop glibc docker rm glibc docker rmi ubuntu:jammy 你也可以换用 Debian 或者任意你喜欢的发行版\n直装 注：于 2022-10-03 打包的 glibc v2.35，可能过时\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #!/usr/bin/env bash set -ex # working directory # change to /opt, /usr/share or something else if you like WK_DIR=\u0026#34;/root/data\u0026#34; mkdir -p $WK_DIR cd $WK_DIR # download wget \u0026#34;https://github.com/KumaTea/blog/releases/download/221003/glibc.tar.gz\u0026#34; # decompress tar -xzf glibc.tar.gz # link ln -s \u0026#34;$WK_DIR/x86_64-linux-gnu\u0026#34; /lib/x86_64-linux-gnu || echo \u0026#34;Link already exists.\u0026#34; ln -s \u0026#34;$WK_DIR/x86_64-linux-gnu/ld-linux-x86-64.so.2\u0026#34; /lib/ld-linux-x86-64.so.2 || echo \u0026#34;Link already exists.\u0026#34; # cleanup rm -f glibc.tar.gz 操作完成后程序已可成功运行。\n","date":"2022-10-03T15:00:00+08:00","image":"https://blog.kmtea.eu/p/221003-glibc-openwrt/img/cover_hu_3eb99aa3ed81a26a.jpg","permalink":"https://blog.kmtea.eu/p/221003-glibc-openwrt/","title":"向 OpenWrt 添加 glibc"},{"content":"树莓派安装 RHEL This tutorial is originally written in English here\n这个想法怎么来的 大概是 鲨了 CentOS 的良心不安， Red Hat 去年宣布 RHEL 个人订阅白送了 。 也就是现在家用红帽 Linux 不要钱了！\n我囸，有 RHEL 用，谁还玩 CentOS?\n但是我没机器来玩 (P.S. 写的时候有了嘿嘿)， 手头就剩下一块树莓派 4B 🥺\n于是开始搜索教程，但 Bing 直接给我当头一棒：\n本来准备放弃了， 结果意外发现， Oracle Linux ， 一个红帽Linux的衍生版本， (对，就那个拒了我100多次注册云服务的万恶的 Oracle) 有发布 适用于树莓派 4B、400和3B/+ 的固件 耶！\n搜了下，大概是唯一支持树莓派的 RHEL 发行版了。\n花了几天摸索出一个奇技淫巧，玩一波偷梁换柱， 达到在树莓派上安装 RHEL 的方法，简述一下。\n需求 Raspberry Pi 4B, 400或3B/+ 仅在4B上测试成功 一个系统盘 强烈建议使用硬盘盒转接 SSD!!! Red Hat 个人订阅 科学或者魔法上网 注册 Red Hat 个人订阅 来这里 注册 Red Hat Individual Subscription 。\n注册完了记得看下 你的管理页面 有没有东西：\n等下要从 RHEL 的 repo 中更新软件包，所以这步不能省。\n安装 Oracle Linux 首先 下载 Oracle Linux 。\n然后找个你喜欢的刷写工具。 一般 Raspberry Pi Imager 就好了，但我更喜欢 Etcher 。\n下载的图像压缩成 xz 格式了，但不用解压，直接开刷！\nSSD 与 SD卡 Oracle Linux 的根文件系统 (rootfs) 是 btrfs ， 卡得出奇，卡的批爆！合起来写炸了我5个内存卡和U盘！就为了这篇！ 所以别用内存卡！用固态！！！\n或者可以考虑下换成 f2fs 。\n然后接上树莓派，插电，开机！\n进入路由的 DHCP 客户端页面，找到 IP 地址，刚出来那个。\nssh 连上，用户名 root ，密码 oracle 。\n系统准备 ###扩展分区\n解压缩后的固件大小约为 3.89GB ，装完了剩下大约300MB。 这点地方塞牙缝 (dnf update) 都不够，先要用 parted 扩展分区。\n没自带，先安装：\n1 dnf install -y parted 不用先dnf update\n然后开搞：\n1 2 3 4 5 6 parted /dev/sda # print # resizepart 3 # q btrfs filesystem resize max / 更新 kernel-uek 要留的唯一一个软件包是 kernel-uek 。 全称 Unbreakable Enterprise Kernel ， 是 Oracle 搞的 Linux 内核。\n为什么留，因为只有 Oracle Linux 支持树莓派，当然只有它的内核能用。\n1 dnf update -y kernel-uek 补丁和运行 \u0026ldquo;convert2rhel\u0026rdquo;。 开始偷梁换柱之前先看看 os-release 怀念一下：\n1 cat /etc/os-release ###安装convert2rhel。\n参照 换到 Red Hat 吧 ， 第一步是添加证书和仓库。\n1 2 3 4 5 # ref: https://www.redhat.com/en/blog/introduction-convert2rhel-now-officially-supported-convert-rhel-systems-rhel curl -o /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release https://www.redhat.com/security/data/fd431d51.txt curl --create-dirs -o /etc/rhsm/ca/redhat-uep.pem https://ftp.redhat.com/redhat/convert2rhel/redhat-uep.pem curl -o /etc/yum.repos.d/convert2rhel.repo https://ftp.redhat.com/redhat/convert2rhel/8/convert2rhel.repo 然后安装 convert2rhel ：\n1 dnf install -y convert2rhel 修改配置 由于 RHEL 没有正式支持树莓派，它的转换工具也不会包含我们要用的配置。 硬转就会。。。\n但是可以偷懒，只要改下 x86_64 的配置就行。\n1 2 3 4 5 cp /usr/share/convert2rhel/configs/oracle-8-x86_64.cfg /usr/share/convert2rhel/configs/oracle-8-aarch64.cfg sed -i \u0026#39;s/rhel-8-for-x86_64/rhel-8-for-aarch64/g\u0026#39; /usr/share/convert2rhel/configs/oracle-8-aarch64.cfg # sed -i \u0026#39;s/-rpms/-beta-rpms/g\u0026#39; /usr/share/convert2rhel/configs/oracle-8-aarch64.cfg # sed -i \u0026#34;s/checks.perform_pre_checks()/loggerinst.task(\u0026#39;SKIP CHECKS\u0026#39;) # checks.perform_pre_checks()/g\u0026#34; /usr/lib/python3.6/site-packages/convert2rhel/main.py sed -i \u0026#39;s/json-c.x86_64/json-c.aarch64/g\u0026#39; /usr/lib/python3.6/site-packages/convert2rhel/subscription.py x86 上 convert2rhel 会搞定证书， 但是因为是树莓派，我们要自己搞。\n红帽产品证书\n在 Choose your product 中选择 Red Hat Enterprise Linux, 找到 Red Hat Enterprise Linux for ARM 64, 选好版本和架构并下载，把证书传到树莓上运行。\n1 2 3 # cp /path/to/cert/script /tmp/Red_Hat_Product_Certificate.sh chmod +x /tmp/Red_Hat_Product_Certificate.sh bash /tmp/Red_Hat_Product_Certificate.sh 手动运行 convert2rhel 不能直接运行 convert2rhel ， 因为它写的时候也没想到会有人在树莓派上跑。\n1 source /etc/os-release \u0026amp;\u0026amp; python3 -c \u0026#34;from convert2rhel import main, subscription, systeminfo; main.initialize_logger(\u0026#39;convert2rhel.log\u0026#39;, \u0026#39;/var/log/convert2rhel\u0026#39;); systeminfo.RELEASE_VER_MAPPING[\u0026#39;$VERSION\u0026#39;] = \u0026#39;$VERSION\u0026#39;; systeminfo.system_info.resolve_system_info(); subscription.download_rhsm_pkgs()\u0026#34; 成功了大概会是这样：\n然后安装刚刚下载的软件包：\n1 2 cd /usr/share/convert2rhel/subscription-manager dnf install -y $(ls | tr \u0026#39;\\n\u0026#39; \u0026#39; \u0026#39;) 绑定订阅 1 subscription-manager register 替换 repo 先鸟尽弓藏兔死狗烹。\n1 2 3 mv /etc/yum.repos.d/convert2rhel.repo /etc/yum.repos.d/convert2rhel.repo.bak mv /etc/yum.repos.d/oracle-linux-ol8.repo /etc/yum.repos.d/oracle-linux-ol8.repo.bak dnf clean all 删除不需要的软件包 1 2 3 4 dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm subscription-manager repos --enable \u0026#34;codeready-builder-for-rhel-8-$(arch)-rpms\u0026#34; dnf remove convert2rhel -y dnf remove oraclelinux-release oraclelinux-release-el8 || rpm -e --nodeps oraclelinux-release oraclelinux-release-el8 ###重新安装本地安装的软件包\n1 2 3 4 cd /usr/share/convert2rhel/subscription-manager dnf reinstall -y $(ls | tr \u0026#39;\\n\u0026#39; \u0026#39; \u0026#39; | sed \u0026#39;s/.rpm//g\u0026#39;) cd ~ rm -rvf /usr/share/convert2rhel 替换非 RHEL 软件包 1 dnf install -y redhat-lsb 1 2 3 4 5 6 dnf reinstall setup dnf distro-sync dnf update -y dnf reinstall $(dnf list --installed | grep ol8 | awk \u0026#39;{print $1}\u0026#39; | tr \u0026#39;\\n\u0026#39; \u0026#39; \u0026#39;) dnf reinstall $(dnf list --installed | grep anaconda | awk \u0026#39;{print $1}\u0026#39; | tr \u0026#39;\\n\u0026#39; \u0026#39; \u0026#39;) dnf reinstall $(dnf list --installed | grep commandline | awk \u0026#39;{print $1}\u0026#39; | tr \u0026#39;\\n\u0026#39; \u0026#39; \u0026#39;) 结论 家人们看看 neofetch 吧\n后记 RHEL 9 出了，但是懒得折腾了，教程写了开摆。\n不会真的有人会有和我一样的脑洞吧？？？\n以及这篇尽量口语化了，如果你英语很彳亍，真想搞还是建议看看上面的英文链接。 虽然我英语是工地水平，但是大概还是比看这篇好理解一点。\n","date":"2022-07-10T04:00:00+08:00","image":"https://blog.kmtea.eu/p/220710-pi-rhel/img/cover_hu_fd12b3250d25bb05.jpg","permalink":"https://blog.kmtea.eu/p/220710-pi-rhel/","title":"树莓派安装 RHEL"},{"content":"Nexmo 虚拟手机号浅探 最低成本：6.5元\n前情提要 5月，我的 Telegram 被误封了。众所周知，Telegram 和微信一样不存在客服，因此我只能重新注册一个账号。\n想起来18年似乎注册过一个叫 Nexmo 的虚拟号码平台，还充值了10欧元， 但当时因为需要编程才能使用，就放置了。\n这次重新登录，发现已经可以不用写代码，于是欣然注册，分享如下。\n0. 准备工作 注册及充值略（因为是四年前 😩\nsign up\n支持 支付宝 / 微信 / 银联 Nexmo 最低充值金额为 10 欧元，建议拼车 1. 选用号码 注册完毕并充值后，进入 主页\n点击左侧 构建和管理 - 号码 - 购买号码\n选择 国家/地区 为 United States (+1)， 功能 为 SMS， 类型为 Any\n下方的 Number 如果有想要的数字可以填写， 临时号码留空即可\n选择一个你喜欢的号码，点击 购买\n你应该能在 构建和管理 - 号码 - 您的号码 看见刚刚购买的号码\n2. 注册 Google Voice 打开 Google Voice ， 进入 设置 ， 点击 New linked number 按钮\n填入刚才购买的号码，点击 Send code\n回到 日志 - 短信日志\n更改 指示 为 入站，点击 搜索\n再把验证码填入 Google Voice，完成验证\n后记 正如前文所述， Nexmo 的正规用法是编程和使用 API， 因此如果有能力，可以搭建 Webhook， 甚至可以实现转发到 Telegram 的效果\nDiscussion 「全网最低成本」指每个虚拟手机号每月租用成本为 0.9 欧元，约合人民币 6.5 元 作者申明没有收到任何资助，且无利益相关（废话） ","date":"2022-06-23T18:00:00+08:00","image":"https://blog.kmtea.eu/p/220623-nexmo/img/cover_hu_2e4f58ed3da01f89.jpg","permalink":"https://blog.kmtea.eu/p/220623-nexmo/","title":"Nexmo 虚拟手机号浅探"},{"content":"Wallpaper Engine 刷时长 我一直是个游戏时长爱好者，喜欢看自己主页上游戏时间一点点多起来（哪怕没有真的在玩）。\n以前用过 ArchiSteamFarm 来挂游戏，但是因为它会强制加群就弃用了。\n于是带着这个需求我去 Steam 社区提问了下：\n提问前遵循了 issue 的基本规则（先搜索提问列表以及查阅文档那些）。\n开发者一开始说对不起做不到，但是很快就修改了：\n我把参数加粗放在这里：\n-steamtrackhours 原帖链接：社区帖子\n","date":"2022-06-16T20:00:00+08:00","image":"https://blog.kmtea.eu/p/220616-we-in-game/img/cover_hu_73b6c6226e333cc7.jpg","permalink":"https://blog.kmtea.eu/p/220616-we-in-game/","title":"Wallpaper Engine 刷时长"},{"content":"Hello World This is my first post!\n","date":"2022-05-31T01:21:50+08:00","permalink":"https://blog.kmtea.eu/p/220531-hello-world/","title":"Hello World"}]